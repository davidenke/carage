import{r as e,h as t,H as r}from"./p-b7f1464d.js";const a=new Map,i=(e,t,r)=>{a.has(e)||a.set(e,new Map),a.get(e).set(t,r)};class A{constructor(e,t){this.id=e,this.setData(t)}setData(e){const t=this.getMetadata();Object.keys(e).forEach(r=>{this[r]=t.get(r).parse(e[r])})}getMetadata(){return a.get(this.constructor.name)}clone(){return new this.constructor(this.id,this.serialize())}serialize(){const e=this.getMetadata();return Array.from(e.keys()).reduce((t,r)=>(t[r]=e.get(r).serialize(this[r]),t),{})}toJSON(){return this.serialize()}}const s=({label:e,required:t}={})=>({constructor:r},a)=>{i(r.name,a.toString(),{type:"text",label:e,required:t,parse:e=>e,serialize:e=>e})},o=({label:e,required:t}={})=>({constructor:r},a)=>{i(r.name,a.toString(),{type:"number",label:e,required:t,parse:e=>e,serialize:e=>e})},l="localStorage";var n=function(e,t,r,a){var i,A=arguments.length,s=A<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(A<3?i(s):A>3?i(t,r,s):i(t,r))||s);return A>3&&s&&Object.defineProperty(t,r,s),s};class c extends A{static load(e){return new c(e,JSON.parse(function(e){const t=window[l].getItem(e);if(null!==t)return t}(e)))}static save(e){var t,r;t=e.id,r=JSON.stringify(e),window[l].setItem(t,r)}get name(){return`${this.manufacturer} ${this.model}`}get powerPS(){return Math.round(1.35962*this.powerKW)}get keyCode(){return`${this.manufacturerKey}/${this.modelCode}`}save(){c.save(this)}}n([(({label:e,required:t}={})=>({constructor:r},a)=>{i(r.name,a.toString(),{type:"image",label:e,required:t,parse:e=>e,serialize:e=>e})})()],c.prototype,"image",void 0),n([s({required:!0})],c.prototype,"manufacturer",void 0),n([s({required:!0})],c.prototype,"model",void 0),n([(({label:e,required:t}={})=>({constructor:r},a)=>{i(r.name,a.toString(),{type:"date",label:e,required:t,parse:e=>new Date(e),serialize:e=>e.toISOString()})})({label:"registration date"})],c.prototype,"registrationDate",void 0),n([s({label:"license plate"})],c.prototype,"licensePlate",void 0),n([s({label:"design type"})],c.prototype,"designType",void 0),n([o({label:"power in kilowatts"})],c.prototype,"powerKW",void 0),n([o()],c.prototype,"capacity",void 0),n([s({required:!0})],c.prototype,"vin",void 0),n([s({label:"manufacturer key"})],c.prototype,"manufacturerKey",void 0),n([s({label:"model code"})],c.prototype,"modelCode",void 0);const u=class{constructor(t){e(this,t),this.newCar=new c(`carage.${Math.floor(65536*(1+Math.random())).toString(16).substring(1)}`,{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQAQMAAABI+4zbAAAABlBMVEXMzMzMzMy+G0qZAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACwElEQVR4nO2XMY6cMBSGH0IamhGTkgJpr0A6ipX2KnMEpEjJFJHCTXKNlD4KR5hyi2iJn20YPBtpbTJSmu8rfmkH/AHmrf0QAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD475TzJPL0JiFuFEbkNEuIJE7zq8iPeQyxuYh1vcxLJPEsjci1nELErktxDZHEIO5xrj42VNY1ySVEEnov5WhPd7HhZFT/7CMJnWGpRHofG45G9a2PJOyZIrXY011saIzqax9JVO4W9PTj3ZjOyEGPH8JJH3PQaFXT3rkGo39XPpJwwxt1NkG8cDZ6q6WPJI4avV66v7u+MXqr5diGSf2YNrhKHzcK7ypGF0muRqNTTRe7ytHowWJs8l1j55/lkx3qXOJdpglFmOgaVDN4Vx+m52BdvWr6ZFcfXMU4+GdpwyuovUuMiyRXd++qQ50cd7h0pTur5uxdVXi3jRXohUyX7nr5OUUuO1nuufsdrqtdtbYuO8+6pNnIdn3WWVGNOYf3Nbklzf7mXZOLJNcXXZ0i1+ArwOS7vulri1y9K69ih+urvrnI1bryslOX7fr+zlW78iol33XRKohclSuvw0Nc5S/9vd7nKmKX31mPO1zDWqbnZZ1yAxvJr9VhuaXV5e+rf4irfNXfu72u7ZoT3uNZdq1fdy5fX+YfXOsa7eu+cI1J5hrtXNu9w/8/FrNlytw79KpjtKe5deLmytjTnCvaa6elMvfsteW47QGWdTW4MnuActz2Jst6r67M3kRdUc9UrS3dnp6pinq5em3Dsns5N3TbY7br0D09Zh31vv061Xt632eNwYcv3sXlSt/XfwqFfgn89VtB/wkzvxVerc1+vpgQseuiB10kET6fxhCx62leIomTfumdfi8Ruyo9WL29HwUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+EP2PcMvgHU5x0AAAAASUVORK5CYII=",registrationDate:new Date}),this.isCreating=!1,this.cars=[]}openCreator(){this.isCreating=!0}closeCreator(){this.isCreating=!1}loadAll(){this.cars=Object.entries(window[l]).reverse().map(([e,t])=>new c(e,JSON.parse(t)))}save(e){e.save(),this.loadAll(),this.closeCreator()}componentWillLoad(){this.loadAll(),this.cars.length<1&&this.openCreator()}render(){return t(r,{class:{"is-creating":this.isCreating}},t("carage-editor",{class:"creator",model:this.newCar,onClose:()=>this.closeCreator(),onSave:({detail:e})=>this.save(e)}),t("carage-cars",{class:"cars"},this.cars.map(e=>t("carage-car",{model:e}))),t("carage-button",{class:"create",onClick:()=>this.openCreator()},"create"))}static get style(){return":host{-webkit-transition:.2s ease-out;transition:.2s ease-out;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100vh}:host(.is-creating){-webkit-transform:translateX(110vw);transform:translateX(110vw)}.create{bottom:auto;left:var(--base-size);top:var(--base-size)}.create,.creator{position:absolute;right:auto}.creator{bottom:0;left:-110vw;top:0;display:block;height:100vh;width:100vw}"}};export{u as carage_root};