import{r as t,h as e,c as r,H as s}from"./p-b7f1464d.js";import{f as a}from"./p-964c20ab.js";const i=class{constructor(e){t(this,e),this.expand=!1}render(){return e("button",{type:"button",class:{expand:this.expand}},e("slot",null))}static get style(){return"button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;border-radius:var(--base-size);background:var(--color-accent);color:var(--color-light);cursor:pointer;display:inline-block;outline:0;margin:0;padding:calc(var(--base-size) / 2 - 1px) var(--base-size) calc(var(--base-size) / 2);text-align:center;text-decoration:none;text-overflow:ellipsis;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;pointer-events:auto;-webkit-font-kerning:none;font-kerning:none}button:disabled{cursor:default;pointer-events:none}button.expand{width:100%}"}},l=class{constructor(e){t(this,e),this.isEditing=!1}openEditor(){this.isEditing=!0}closeEditor(){this.isEditing=!1}save(t){this.model=t,this.model.save(),this.closeEditor()}render(){return e("article",{class:{"is-editing":this.isEditing}},e("img",{src:this.model.image,alt:this.model.name}),e("carage-card",{class:"details"},e("h2",null,this.model.licensePlate),e("h1",null,this.model.name),e("dl",null,e("dt",null,"identification"),e("dd",null,this.model.vin),e("dt",null,"key code"),e("dd",null,this.model.keyCode),e("dt",null,"registration date"),e("dd",null,a(this.model.registrationDate)),e("dt",null,"power"),e("dd",null,this.model.powerKW,"kW (",this.model.powerPS,"PS)"))),e("carage-button",{class:"edit",onClick:()=>this.openEditor()},"edit"),e("carage-editor",{class:"editor",model:this.model.clone(),onClose:()=>this.closeEditor(),onSave:({detail:t})=>this.save(t)}))}static get style(){return"article{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100vh;overflow-y:scroll;-webkit-overflow-scrolling:touch}article::-webkit-scrollbar{width:0!important}article{overflow:-moz-scrollbars-none;-ms-overflow-style:none}img{position:relative;height:auto;width:100%;margin-bottom:calc(var(--base-size) * -1);z-index:-1}dd,dl,h1,h2,p{margin:0;padding:0}h1,h2{font-weight:var(--font-weight-medium);line-height:1.5}h2{font-size:1.5rem}h1{font-size:1.8rem}dt{display:none}dd{font-size:1.5rem;line-height:1.5}.details{-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.edit{position:absolute;bottom:auto;left:auto;right:var(--base-size);top:var(--base-size)}.editor{-webkit-transition:.2s ease-out;transition:.2s ease-out;-webkit-transition-property:top;transition-property:top;position:fixed;bottom:auto;left:0;right:0;top:110vh;height:calc(100vh - var(--base-size));z-index:1}.is-editing .editor{top:var(--base-size)}"}},c=class{constructor(e){t(this,e),this.closable=!1,this.close=r(this,"close",7)}render(){return[e("slot",null),this.closable&&e("carage-button",{class:"close",onClick:()=>this.close.emit()},"close")]}static get style(){return":host{-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.5);box-shadow:0 0 15px 0 rgba(0,0,0,.5);-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:calc(var(--base-size) * 2);position:relative;border-top-left-radius:var(--base-size);border-top-right-radius:var(--base-size);background:var(--color-light)}\@media (prefers-color-scheme:dark){:host{-webkit-box-shadow:0 0 15px 0 rgba(0,0,0,.75);box-shadow:0 0 15px 0 rgba(0,0,0,.75);background:var(--color-dark)}}.close{position:absolute;bottom:auto;left:auto;right:var(--base-size);top:var(--base-size)}"}},n=class{constructor(e){t(this,e)}render(){return e("slot",null)}static get style(){return":host{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;height:100vh;width:100vw;overflow:hidden;scroll-behavior:smooth}\@media (pointer:coarse){:host{overflow-x:scroll;-ms-scroll-snap-type:x mandatory;-webkit-scroll-snap-type:x mandatory;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}:host::-webkit-scrollbar{width:0!important}:host{overflow:-moz-scrollbars-none;-ms-overflow-style:none}}:host ::slotted(*),:host>*{-webkit-box-flex:1;-ms-flex:1 0 100%;flex:1 0 100%;height:100vh;width:100vw}\@media (pointer:coarse){:host ::slotted(*),:host>*{scroll-snap-align:start;overflow:visible}}"}},o=class{constructor(e){t(this,e),this.close=r(this,"close",7),this.save=r(this,"save",7)}update(t,e){this.model[t]=e}renderInput(t,{type:r,label:s,required:a}){return e(`carage-edit-${r}`,{class:"input",required:a,value:this.model[t],onValueChanged:({detail:e})=>this.update(t,e)},s||t)}renderInputs(t){const e=t.getMetadata();return Array.from(e.entries()).map(([t,e])=>this.renderInput(t,e))}render(){return e("carage-card",{class:"card",closable:!0,onClose:()=>this.close.emit()},e("form",null,this.renderInputs(this.model),e("carage-button",{class:"submit",expand:!0,onClick:()=>this.save.emit(this.model)},"save")))}static get style(){return":host{border-top-left-radius:var(--base-size);border-top-right-radius:var(--base-size)}.card{padding:calc(var(--base-size) * 3) var(--base-size) 0}.card,form{height:100%}form{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow-x:scroll}form::-webkit-scrollbar{width:0!important}form{overflow:-moz-scrollbars-none;-ms-overflow-style:none}.input{margin-bottom:var(--base-size)}.submit{margin-top:var(--base-size)}"}},u=new Map,A=(t,e,r)=>{u.has(t)||u.set(t,new Map),u.get(t).set(e,r)};class d{constructor(t,e){this.id=t,this.setData(e)}setData(t){const e=this.getMetadata();Object.keys(t).forEach(r=>{this[r]=e.get(r).parse(t[r])})}getMetadata(){return u.get(this.constructor.name)}clone(){return new this.constructor(this.id,this.serialize())}serialize(){const t=this.getMetadata();return Array.from(t.keys()).reduce((e,r)=>(e[r]=t.get(r).serialize(this[r]),e),{})}toJSON(){return this.serialize()}}const h=({label:t,required:e}={})=>({constructor:r},s)=>{A(r.name,s.toString(),{type:"text",label:t,required:e,parse:t=>t,serialize:t=>t})},g=({label:t,required:e}={})=>({constructor:r},s)=>{A(r.name,s.toString(),{type:"number",label:t,required:e,parse:t=>t,serialize:t=>t})},p="localStorage";var E=function(t,e,r,s){var a,i=arguments.length,l=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,r,s);else for(var c=t.length-1;c>=0;c--)(a=t[c])&&(l=(i<3?a(l):i>3?a(e,r,l):a(e,r))||l);return i>3&&l&&Object.defineProperty(e,r,l),l};class b extends d{static load(t){return new b(t,JSON.parse(function(t){const e=window[p].getItem(t);if(null!==e)return e}(t)))}static save(t){var e,r;e=t.id,r=JSON.stringify(t),window[p].setItem(e,r)}get name(){return`${this.manufacturer} ${this.model}`}get powerPS(){return Math.round(1.35962*this.powerKW)}get keyCode(){return`${this.manufacturerKey}/${this.modelCode}`}save(){b.save(this)}}E([(({label:t,required:e}={})=>({constructor:r},s)=>{A(r.name,s.toString(),{type:"image",label:t,required:e,parse:t=>t,serialize:t=>t})})()],b.prototype,"image",void 0),E([h({required:!0})],b.prototype,"manufacturer",void 0),E([h({required:!0})],b.prototype,"model",void 0),E([(({label:t,required:e}={})=>({constructor:r},s)=>{A(r.name,s.toString(),{type:"date",label:t,required:e,parse:t=>new Date(t),serialize:t=>t.toISOString()})})({label:"registration date"})],b.prototype,"registrationDate",void 0),E([h({label:"license plate"})],b.prototype,"licensePlate",void 0),E([h({label:"design type"})],b.prototype,"designType",void 0),E([g({label:"power in kilowatts"})],b.prototype,"powerKW",void 0),E([g()],b.prototype,"capacity",void 0),E([h({required:!0})],b.prototype,"vin",void 0),E([h({label:"manufacturer key"})],b.prototype,"manufacturerKey",void 0),E([h({label:"model code"})],b.prototype,"modelCode",void 0);const v=class{constructor(e){t(this,e),this.newCar=new b(`carage.${Math.floor(65536*(1+Math.random())).toString(16).substring(1)}`,{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQAQMAAABI+4zbAAAABlBMVEXMzMzMzMy+G0qZAAAACXBIWXMAAA7EAAAOxAGVKw4bAAACwElEQVR4nO2XMY6cMBSGH0IamhGTkgJpr0A6ipX2KnMEpEjJFJHCTXKNlD4KR5hyi2iJn20YPBtpbTJSmu8rfmkH/AHmrf0QAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD475TzJPL0JiFuFEbkNEuIJE7zq8iPeQyxuYh1vcxLJPEsjci1nELErktxDZHEIO5xrj42VNY1ySVEEnov5WhPd7HhZFT/7CMJnWGpRHofG45G9a2PJOyZIrXY011saIzqax9JVO4W9PTj3ZjOyEGPH8JJH3PQaFXT3rkGo39XPpJwwxt1NkG8cDZ6q6WPJI4avV66v7u+MXqr5diGSf2YNrhKHzcK7ypGF0muRqNTTRe7ytHowWJs8l1j55/lkx3qXOJdpglFmOgaVDN4Vx+m52BdvWr6ZFcfXMU4+GdpwyuovUuMiyRXd++qQ50cd7h0pTur5uxdVXi3jRXohUyX7nr5OUUuO1nuufsdrqtdtbYuO8+6pNnIdn3WWVGNOYf3Nbklzf7mXZOLJNcXXZ0i1+ArwOS7vulri1y9K69ih+urvrnI1bryslOX7fr+zlW78iol33XRKohclSuvw0Nc5S/9vd7nKmKX31mPO1zDWqbnZZ1yAxvJr9VhuaXV5e+rf4irfNXfu72u7ZoT3uNZdq1fdy5fX+YfXOsa7eu+cI1J5hrtXNu9w/8/FrNlytw79KpjtKe5deLmytjTnCvaa6elMvfsteW47QGWdTW4MnuActz2Jst6r67M3kRdUc9UrS3dnp6pinq5em3Dsns5N3TbY7br0D09Zh31vv061Xt632eNwYcv3sXlSt/XfwqFfgn89VtB/wkzvxVerc1+vpgQseuiB10kET6fxhCx62leIomTfumdfi8Ruyo9WL29HwUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD+EP2PcMvgHU5x0AAAAASUVORK5CYII=",registrationDate:new Date}),this.isCreating=!1,this.cars=[]}openCreator(){this.isCreating=!0}closeCreator(){this.isCreating=!1}loadAll(){this.cars=Object.entries(window[p]).reverse().map(([t,e])=>new b(t,JSON.parse(e)))}save(t){t.save(),this.loadAll(),this.closeCreator()}componentWillLoad(){this.loadAll(),this.cars.length<1&&this.openCreator()}render(){return e(s,{class:{"is-creating":this.isCreating}},e("carage-editor",{class:"creator",model:this.newCar,onClose:()=>this.closeCreator(),onSave:({detail:t})=>this.save(t)}),e("carage-cars",{class:"cars"},this.cars.map(t=>e("carage-car",{model:t}))),e("carage-button",{class:"create",onClick:()=>this.openCreator()},"create"))}static get style(){return":host{-webkit-transition:.2s ease-out;transition:.2s ease-out;-webkit-transition-property:-webkit-transform;transition-property:-webkit-transform;transition-property:transform;transition-property:transform,-webkit-transform;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100vh}:host(.is-creating){-webkit-transform:translateX(110vw);transform:translateX(110vw)}.create{bottom:auto;left:var(--base-size);top:var(--base-size)}.create,.creator{position:absolute;right:auto}.creator{bottom:0;left:-110vw;top:0;display:block;height:100vh;width:100vw}"}};export{i as carage_button,l as carage_car,c as carage_card,n as carage_cars,o as carage_editor,v as carage_root};